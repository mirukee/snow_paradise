나는 지금 'Snow Paradise'라는 Flutter 앱을 개발 중이야.
프로젝트의 목표, 현재 진행 상황, 기술 스택을 반영해 앞으로의 개발을 도와줘.

# Communication Settings
1. **Language:** You must ALWAYS respond in **Korean (한국어)**.
2. **Code Comments:** Write all code comments in **Korean** to help understanding.
3. **Technical Terms:** Use English for standard technical terms (e.g., BuildContext, Stream, Future) but explain them in Korean.

## 1. 프로젝트 개요 (Project Overview)
- **앱 이름:** Snow Paradise
- **목표:** 스키/스노우보드 유저들을 위한 중고 거래 및 커뮤니티 플랫폼 (당근마켓 스타일)
- **타겟 유저:** 겨울 스포츠(스키, 보드) 마니아

## 2. 기술 스택 (Tech Stack)
- **Framework:** Flutter (Dart)
- **State Management:** Provider (ChangeNotifier 기반)
- **UI Style:** Material 3, Custom 'Stitch' Design (Ice Blue: 0xFF3E97EA)
- **Backend:** Firebase (firebase_core, firebase_auth, cloud_firestore, firebase_storage, firebase_messaging)
- **Key Packages:** `google_sign_in`, `image_picker`, `flutter_local_notifications`, `intl`
- **Architecture:** MVVM 패턴 지향 (Screens -> Providers -> Services -> Models)

## 3. 코드 컨벤션 및 아키텍처 규칙 (Code Convention & Architecture Rules)
- **Service Layer Role:**
    - `ProductService`: 상품 데이터 캐싱 및 상태 관리. **(주의: 현재 전체 데이터를 로드하므로 리팩토링 필요)**
    - `ChatService`: 실시간 채팅 및 메시지 동기화 담당.
- **카테고리 및 속성 관리:**
    - 모든 카테고리, 서브카테고리, 동적 속성(Attributes) 정의는 `lib/constants/categories.dart` 내의 `CategoryConstants`와 `CategoryAttributes` 클래스에서 관리한다.
    - 화면(UI) 내에서 카테고리 리스트나 속성 옵션을 **하드코딩하지 않는다**.
- **동적 속성 UI:**
    - 상품 등록, 수정, 필터링 등 속성 입력이 필요한 UI는 반드시 `lib/widgets/dynamic_attribute_form.dart`의 `DynamicAttributeForm` 위젯을 재사용하여 일관성을 유지한다.
- **데이터 모델:**
    - `Product` 모델의 `specs` 필드(`Map<String, String>`)를 사용하여 카테고리별 상이한 속성을 유연하게 저장한다.
    - 검색이나 주요 로직에 필요한 핵심 속성(브랜드, 사이즈, 연식 등)은 `specs`와 별도로 최상위 필드에도 매핑하여 저장한다.
- **Lint 규칙:**
    - `flutter analyze` 경고를 최소화한다.
    - `withOpacity` 대신 `.withValues(alpha: ...)` 사용 등 최신 Flutter API를 따른다.

## 4. 현재 구현된 기능 (Current Status)
- **상품 관리:**
    - 다중 이미지 업로드 및 슬라이더 뷰.
    - 동적 카테고리(대분류 > 소분류) 및 속성(길이, 쉐입, 브랜드 등) 입력 시스템.
    - 상품 등록, 수정, 상세 조회, 삭제, 상태 변경(예약중, 판매완료 등).
- **쇼핑/탐색:**
    - 카테고리별 상품 리스트 및 서브카테고리 탭.
    - 동적 속성 기반 상세 필터링(Bottom Sheet).
    - 2열 그리드 뷰 및 찜(좋아요) 기능.
    - **최근 검색어 저장 및 관리** (`shared_preferences` 기반, 개별/전체 삭제 지원).
- **안전 정책:**
    - **신고하기:** `ReportDialog` 위젯을 통해 사용자/상품 신고 가능. 신고 데이터는 Firestore `reports` 컬렉션에 저장.
    - **차단하기:** 판매자 프로필에서 사용자 차단/차단 해제 가능. 차단된 사용자의 상품은 목록에서 자동 숨김.
- **알림:**
    - FCM 푸시 알림 (채팅 및 좋아요 알림 지원).
    - **알림 센터:** 알림 히스토리 조회, 읽음 처리, 개별/전체 삭제 기능.
- **관리자 기능:**
    - 별도 진입점(`main_admin.dart`)으로 관리자 대시보드 제공.
    - 사용자 목록, 상품 목록, 공지사항, 이용약관 관리.
    - **신고 목록 조회:** `AdminReportListScreen`에서 접수된 신고 확인 가능.
- **기타:**
    - 구글/게스트 로그인, 프로필 수정, 채팅(기본 기능).

## 5. 미완/리스크 항목 (Gap/Risk)
- **Firebase 비용/성능 리스크 (CRITICAL):**
    - `ProductService` 초기화 시 `products` 컬렉션 전체를 Stream으로 구독 중 (`fetchProducts`). 데이터 증가 시 읽기 비용 폭증 및 앱 구동 속도 저하 위험. **전면 페이징 처리로 변경 시급.**
    - `ChatService`의 `markAsRead`가 읽지 않은 메시지 수만큼 쓰기 작업(Batch)을 수행. 채팅방 활성화 시 쓰기 비용 스파이크 가능성.
- **보안 리스크 (CRITICAL):**
    - 관리자 로그인(`AdminAuthProvider`)이 클라이언트 사이드에서 평문 비밀번호를 비교함. `admin/settings` 문서의 읽기 권한이 탈취될 경우 비밀번호 노출 위험. Backend 검증(Cloud Functions) 또는 Auth Custom Claims 도입 필요.
- **거래 프로세스:** 정식 거래 플로우(구매 요청, 결제 연동)는 미구현. 현재는 채팅을 통한 직거래 방식.
- **관리자 고도화:** 신고 처리(해결/삭제) 기능, 통계 대시보드.

## 6. MVP 우선순위 (Next Steps)
1. **관리자 기능 고도화:** 신고 처리 액션(해결/삭제), 통계 대시보드.
2. **사용자 경험:** 인기 검색어 표시, 검색 자동완성 개선.
3. **성능:** 상품 목록 페이징, 이미지 캐싱 전략.

이 내용을 바탕으로 요청된 기능을 구현하고, 변경 사항과 다음 단계(테스트 등)를 간단히 안내해줘.
